(this.webpackJsonpprototype=this.webpackJsonpprototype||[]).push([[0],{108:function(e,t,a){},109:function(e,t,a){},122:function(e,t,a){},184:function(e,t,a){},187:function(e,t,a){},188:function(e,t,a){},189:function(e,t,a){"use strict";a.r(t);var r=a(1),o=a(24),n=a.n(o),c=(a(108),a(109),a(110),a(34)),i=a(12),s=a(25),d=a(26),l=a(29),h=a(28),j=a(52),u=a.n(j),p=a(196),b=a(197),O=a(41),v=a(200),x=a(53),m=a.n(x),f=(a(85),a(122),a(2)),C=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var r,o=e.report,n=o.id,c=o.lab,i=o.protocol,d=o.sendDate,l=o.labId,h=o.period;return Object(s.a)(this,a),(r=t.call(this)).handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,o=t.name;r.setState(Object(O.a)({},o,a))},r.handleSubmit=function(e){e.preventDefault();var t={id:r.state.id,lab:r.state.lab,protocol:r.state.protocol,sendDate:r.state.sendDate,labId:r.state.labId,period:r.state.period};r.props.onSubmit(t),r.props.closeModal(),r.setState({id:"",lab:"",protocol:"",sendDate:null,labId:"",period:""})},r.state={id:n,lab:c,protocol:i,sendDate:d,labId:l,period:h},r}return Object(d.a)(a,[{key:"InputDateChange",value:function(e){this.setState({sendDate:e})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Agregar Reporte de Laboratorio"}),Object(f.jsxs)(v.a,{onSubmit:this.handleSubmit,children:[Object(f.jsxs)(v.a.Group,{controlId:"formBasicLabo",children:[Object(f.jsx)(v.a.Label,{children:"Laboratorio"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"Laboratorio",value:this.state.lab,onChange:this.handleInputChange,name:"lab"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicProtocol",children:[Object(f.jsx)(v.a.Label,{children:"Protocolo"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"#",value:this.state.protocol,onChange:this.handleInputChange,name:"protocol"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicSendDate",children:[Object(f.jsx)(v.a.Label,{children:"Fecha de env\xedo al comit\xe9"}),Object(f.jsx)("div",{}),Object(f.jsx)(m.a,{selected:this.state.sendDate,onChange:function(t){return e.InputDateChange(t)},dateFormat:"dd/MM/yyyy",isClearable:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicLabId",children:[Object(f.jsx)(v.a.Label,{children:"Identificador del estudio"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"------",value:this.state.labId,onChange:this.handleInputChange,name:"labId"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicPeriod",children:[Object(f.jsx)(v.a.Label,{children:"Periodo del estudio"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"dd/mm/aa => dd/mm/aa",value:this.state.period,onChange:this.handleInputChange,name:"period"})]}),Object(f.jsx)("div",{className:"saveDiv",children:Object(f.jsx)(p.a,{variant:"primary",type:"submit",children:"Guardar"})})]})]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.report.id!==t.id){var a=e.report;return{id:a.id,lab:a.lab,protocol:a.protocol,sendDate:a.sendDate,labId:a.labId,period:a.period}}return null}}]),a}(r.Component),g=a(79);a(194);g.a.initializeApp({apiKey:"AIzaSyCa2sbQ0HRxelXKBUPApHc_FMacDvl4F5o",authDomain:"report-prototype.firebaseapp.com",projectId:"report-prototype",storageBucket:"report-prototype.appspot.com",messagingSenderId:"1022968365167",appId:"1:1022968365167:web:0de10bec101858f3cb4d9a"});var I=g.a,y=(a(184),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getReports=function(){var t=[];e.state.db.collection("reporte").get().then((function(a){a.forEach((function(e){t.push(e.data()),console.log(e.data())})),t.forEach((function(e){return e.sendDate=new Date(1e3*e.sendDate.seconds)})),e.setState({reports:t})}))},e.InvertOpenModal=function(){var t=e.state.modalOpen;e.setState({modalOpen:!t})},e.handleOnSubmit=function(t){if(""===t.id){var a=parseInt(e.getId())+1;t.id=a+"",console.log(a)}e.state.db.collection("reporte").doc(t.id).set(t),e.getReports()},e.onEdit=function(t){e.setState({report:t}),e.InvertOpenModal(),e.getReports()},e.onDelete=function(t){var a=[];e.state.db.collection("reporte").doc(t.id+"").collection("sintomas").get().then((function(r){r.forEach((function(e){a.push(e.data())})),0!==a.length&&a.forEach((function(a){return e.state.db.collection("reporte").doc(t.id+"").collection("sintomas").doc(""+a.id).delete()}))})),e.state.db.collection("reporte").doc(t.id+"").delete(),e.getReports()},e.getId=function(){var t=e.state.reports;return t.length>0?t.reduce((function(e,t){return e<t.id?t.id:e}),e.state.reports[0].id):0},e.addReportHandler=function(){e.setState({report:e.state.baseReport}),e.InvertOpenModal()},e.state={reports:[],report:{id:"",lab:"",protocol:"",sendDate:null,labId:"",period:""},modalOpen:!1,db:I.firestore(),baseReport:{id:"",lab:"",protocol:"",sendDate:null,labId:"",period:""}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getReports()}},{key:"renderReports",value:function(){var e=this;return this.state.reports.map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.id}),Object(f.jsx)("td",{children:t.lab}),Object(f.jsx)("td",{children:t.labId}),Object(f.jsxs)("td",{children:[Object(f.jsx)(p.a,{className:"actionBtn",variant:"warning",onClick:function(){return e.onEdit(t)},children:"Editar"}),Object(f.jsx)(p.a,{className:"actionBtn",variant:"danger",onClick:function(){return e.onDelete(t)},children:"Eliminar"})]}),Object(f.jsx)("td",{children:Object(f.jsx)(c.b,{to:"/report/".concat(t.id),children:Object(f.jsx)(p.a,{variant:"info",children:"CIOMS"})})})]},t.id)}))}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)(b.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"#"}),Object(f.jsx)("th",{children:"Laboratorio"}),Object(f.jsx)("th",{children:"Identificador estudio"}),Object(f.jsx)("th",{children:"Report actions"}),Object(f.jsx)("th",{children:"CIOMS"})]})}),Object(f.jsx)("tbody",{children:this.renderReports()})]}),Object(f.jsx)(p.a,{onClick:this.addReportHandler,variant:"primary",children:"Add Report"}),Object(f.jsxs)(u.a,{style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},isOpen:this.state.modalOpen,ariaHideApp:!1,children:[Object(f.jsx)(C,{report:this.state.report,closeModal:this.InvertOpenModal,onSubmit:this.handleOnSubmit}),Object(f.jsx)("div",{className:"closeDiv",children:Object(f.jsx)(p.a,{className:"closeBtn",onClick:this.InvertOpenModal,variant:"primary",children:"Cerrar"})})]})]})}}]),a}(r.Component)),S=function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){return Object(s.a)(this,a),t.apply(this,arguments)}return Object(d.a)(a,[{key:"render",value:function(){return Object(f.jsx)("div",{children:Object(f.jsx)("h1",{children:"Seems like you are out of route"})})}}]),a}(r.Component),D=a(201),M=a(198),k=a(96),R=a(62),B=a(199),E=(a(187),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(e){var r,o=e.CIOM,n=o.id,c=o.cod,i=o.reportCountry,d=o.reportYear,l=o.event,h=o.ciomState,j=o.notiDate;return Object(s.a)(this,a),(r=t.call(this)).handleInputChange=function(e){var t=e.target,a="checkbox"===t.type?t.checked:t.value,o=t.name,n=Object(R.a)({},r.state[o]);n.correct=""!==a.trim(),n.touched=!0,n.value=a,r.setState(Object(O.a)({},o,n))},r.handleSubmit=function(e){e.preventDefault();var t={id:r.state.id,cod:r.state.cod.value,reportCountry:r.state.reportCountry.value,reportYear:r.state.reportYear.value,event:r.state.event.value,ciomState:r.state.ciomState.value,notiDate:r.state.notiDate.value};r.props.onSubmit(t),r.props.closeModal()},r.state={id:n,cod:{value:c,correct:!1,touched:!1},reportCountry:{value:i,correct:!1,touched:!1},reportYear:{value:d,correct:!1,touched:!1},event:{value:l,correct:!1,touched:!1},ciomState:{value:h,correct:!1,touched:!1},notiDate:{value:j,correct:!1,touched:!1}},r}return Object(d.a)(a,[{key:"InputDateChange",value:function(e){var t=Object(R.a)(Object(R.a)({},this.state.notiDate),{},{value:e,correct:null!=e,touched:!0});this.setState({notiDate:t})}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("h3",{children:"Agregar CIOM al Reporte"}),Object(f.jsxs)(v.a,{onSubmit:this.handleSubmit,children:[Object(f.jsxs)(v.a.Group,{controlId:"formBasicCod",children:[Object(f.jsx)(v.a.Label,{children:"C\xf3digo del paciente"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"c\xf3digo",value:this.state.cod.value,onChange:this.handleInputChange,name:"cod"}),Object(f.jsx)(B.a,{show:!this.state.cod.correct&&this.state.cod.touched,variant:"danger",children:"C\xf3digo no puede ser vac\xedo"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicRepoCountry",children:[Object(f.jsx)(v.a.Label,{children:"Pa\xeds del reporte"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"pa\xeds",value:this.state.reportCountry.value,onChange:this.handleInputChange,name:"reportCountry"}),Object(f.jsx)(B.a,{show:!this.state.reportCountry.correct&&this.state.reportCountry.touched,variant:"danger",children:"Pa\xeds no puede ser vac\xedo"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicReportYear",children:[Object(f.jsx)(v.a.Label,{children:"A\xf1o del reporte"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"a\xf1o",value:this.state.reportYear.value,onChange:this.handleInputChange,name:"reportYear"}),Object(f.jsx)(B.a,{show:!this.state.reportYear.correct&&this.state.reportYear.touched,variant:"danger",children:"A\xf1o del reporte no puede ser vac\xedo"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicEvent",children:[Object(f.jsx)(v.a.Label,{children:"Evento presentado"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"---",value:this.state.event.value,onChange:this.handleInputChange,name:"event"}),Object(f.jsx)(B.a,{show:!this.state.event.correct&&this.state.event.touched,variant:"danger",children:"Evento no puede ser vac\xedo"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicCiomState",children:[Object(f.jsx)(v.a.Label,{children:"Estado del CIOM"}),Object(f.jsx)(v.a.Control,{type:"text",placeholder:"estado",value:this.state.ciomState.value,onChange:this.handleInputChange,name:"ciomState"}),Object(f.jsx)(B.a,{show:!this.state.ciomState.correct&&this.state.ciomState.touched,variant:"danger",children:"Estado no puede ser vac\xedo"})]}),Object(f.jsxs)(v.a.Group,{controlId:"formBasicNotiDate",children:[Object(f.jsx)(v.a.Label,{children:"Fecha de notificaci\xf3n"}),Object(f.jsx)("div",{}),Object(f.jsx)(m.a,{selected:this.state.notiDate.value,onChange:function(t){return e.InputDateChange(t)},dateFormat:"dd/MM/yyyy",isClearable:!0,showYearDropdown:!0,scrollableMonthYearDropdown:!0}),Object(f.jsx)(B.a,{show:!this.state.notiDate.correct&&this.state.notiDate.touched,variant:"danger",children:"Fecha no puede ser vac\xeda"})]}),Object(f.jsx)("div",{className:"saveDiv",children:Object(f.jsx)(p.a,{disabled:!1,variant:"primary",type:"submit",children:"Guardar"})})]})]})}},{key:"checkAllCorrect",value:function(){this.state.correctCOD&&this.state.correctRepoCountry&&this.state.correctRepoYear&&this.state.correctEvent&&this.state.correctCIOMState&&this.state.correctNotiDate?this.setState({allCorrectToSave:!0}):this.setState({allCorrectToSave:!1})}}],[{key:"getDerivedStateFromProps",value:function(e,t){if(e.CIOM.id!==t.id){var a=e.CIOM;return{id:a.id,cod:{value:a.cod,correct:!1,touched:!1},reportCountry:{value:a.reportCountry,correct:!1,touched:!1},reportYear:{value:a.reportYear,correct:!1,touched:!1},event:{value:a.event,correct:!1,touched:!1},ciomState:{value:a.ciomState,correct:!1,touched:!1},notiDate:{value:a.notiDate,correct:!1,touched:!1}}}return null}}]),a}(r.Component)),N=(a(188),function(e){Object(l.a)(a,e);var t=Object(h.a)(a);function a(){var e;return Object(s.a)(this,a),(e=t.call(this)).getId=function(){var t=e.state.CIOMS;return t.length>0?t.reduce((function(e,t){return e<t.id?t.id:e}),e.state.CIOMS[0].id):0},e.InvertOpenModal=function(){var t=e.state.modalOpen;e.setState({modalOpen:!t})},e.handleOnSubmit=function(t){if(console.log(t),""===t.id){var a=parseInt(e.getId())+1;t.id=a+""}e.state.db.collection("reporte").doc(e.state.report.id).collection("sintomas").doc(t.id).set(t),e.setVariablesOriginalValues(),e.getReportAndCIOMS()},e.onEdit=function(t){e.setState({CIOM:t}),e.InvertOpenModal(),e.getReportAndCIOMS()},e.onDelete=function(t){e.state.db.collection("reporte").doc(e.state.report.id).collection("sintomas").doc(""+t.id).delete(),e.getReportAndCIOMS()},e.addCIOMHandler=function(){e.setState({CIOM:e.state.baseCIOM}),e.InvertOpenModal()},e.state={report:{id:"",lab:"",protocol:"",sendDate:"",labId:"",period:""},CIOMS:[],CIOM:{id:"",cod:"",reportCountry:"",reportYear:"",event:"",ciomState:"",notiDate:null},db:I.firestore(),modalOpen:!1,baseCIOM:{id:"",cod:"",reportCountry:"",reportYear:"",event:"",ciomState:"",notiDate:null}},e}return Object(d.a)(a,[{key:"componentDidMount",value:function(){this.getReportAndCIOMS()}},{key:"getReportAndCIOMS",value:function(){var e=this,t=this.props.match.params.id;this.state.db.collection("reporte").doc(""+t).get().then((function(a){if(a.exists){var r=a.data();r.sendDate=new Date(1e3*r.sendDate.seconds),console.log("date try: "+r.sendDate.getDate()),e.setState({report:r}),console.log("voy a buscar cioms");var o=[];e.state.db.collection("reporte").doc(t).collection("sintomas").get().then((function(t){t.forEach((function(e){console.log(e.data()),o.push(e.data())})),o.forEach((function(e){return e.notiDate=new Date(1e3*e.notiDate.seconds)})),e.setState({CIOMS:o})}))}else console.log("No such document!")})).catch((function(e){console.log("error")}))}},{key:"renderCIOMS",value:function(){var e=this;return this.state.CIOMS.map((function(t){return Object(f.jsxs)("tr",{children:[Object(f.jsx)("td",{children:t.id}),Object(f.jsx)("td",{children:t.cod}),Object(f.jsx)("td",{children:t.reportCountry}),Object(f.jsx)("td",{children:t.reportYear}),Object(f.jsx)("td",{children:t.event}),Object(f.jsx)("td",{children:t.ciomState}),Object(f.jsx)("td",{children:t.notiDate+""}),Object(f.jsxs)("td",{children:[Object(f.jsx)(p.a,{className:"actionBtn",variant:"warning",onClick:function(){return e.onEdit(t)},children:"Editar"}),Object(f.jsx)(p.a,{className:"actionBtn",variant:"danger",onClick:function(){return e.onDelete(t)},children:"Eliminar"})]})]},t.id)}))}},{key:"setVariablesOriginalValues",value:function(){this.setState({id:"",cod:"",reportCountry:"",reportYear:"",event:"",ciomState:"",notiDate:null})}},{key:"render",value:function(){return Object(f.jsxs)("div",{className:"RepContainer",children:[Object(f.jsx)(c.b,{to:"/",children:Object(f.jsx)("p",{children:"Back to home"})}),Object(f.jsxs)(D.a,{children:[Object(f.jsxs)(D.a.Header,{children:["Laboratorio ",Object(f.jsx)("span",{className:"titleSpan",children:this.state.report.lab})]}),Object(f.jsxs)(D.a.Body,{children:[Object(f.jsxs)(M.a,{size:"sm",className:"mb-3",children:[Object(f.jsx)(M.a.Prepend,{children:Object(f.jsx)(M.a.Text,{id:"inputGroup-sizing-sm",children:"Identificador Estudio"})}),Object(f.jsx)(k.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:this.state.report.labId,disabled:!0})]}),Object(f.jsxs)(M.a,{size:"sm",className:"mb-3",children:[Object(f.jsx)(M.a.Prepend,{children:Object(f.jsx)(M.a.Text,{id:"inputGroup-sizing-sm",children:"Protocolo"})}),Object(f.jsx)(k.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:this.state.report.protocol,disabled:!0})]}),Object(f.jsxs)(M.a,{size:"sm",className:"mb-3",children:[Object(f.jsx)(M.a.Prepend,{children:Object(f.jsx)(M.a.Text,{id:"inputGroup-sizing-sm",children:"Fecha de env\xedo al comit\xe9"})}),Object(f.jsx)(k.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:this.state.report.sendDate,disabled:!0})]}),Object(f.jsxs)(M.a,{size:"sm",className:"mb-3",children:[Object(f.jsx)(M.a.Prepend,{children:Object(f.jsx)(M.a.Text,{id:"inputGroup-sizing-sm",children:"Periodo"})}),Object(f.jsx)(k.a,{"aria-label":"Small","aria-describedby":"inputGroup-sizing-sm",value:this.state.report.period,disabled:!0})]})]}),Object(f.jsx)(D.a.Header,{children:"Reportes de CIOMS"}),Object(f.jsx)(D.a.Body,{children:Object(f.jsxs)("div",{className:"container",children:[Object(f.jsxs)(b.a,{striped:!0,bordered:!0,hover:!0,children:[Object(f.jsx)("thead",{children:Object(f.jsxs)("tr",{children:[Object(f.jsx)("th",{children:"#"}),Object(f.jsx)("th",{children:"C\xf3digo paciente"}),Object(f.jsx)("th",{children:"Pa\xeds reporte"}),Object(f.jsx)("th",{children:"A\xf1o reporte"}),Object(f.jsx)("th",{children:"Evento"}),Object(f.jsx)("th",{children:"Estado"}),Object(f.jsx)("th",{children:"Fecha notificaci\xf3n"}),Object(f.jsx)("th",{children:"CIOMS actions"})]})}),Object(f.jsx)("tbody",{children:this.renderCIOMS()})]}),Object(f.jsx)(p.a,{onClick:this.addCIOMHandler,variant:"primary",children:"Add CIOM"}),Object(f.jsxs)(u.a,{style:{content:{top:"50%",left:"50%",right:"auto",bottom:"auto",marginRight:"-50%",transform:"translate(-50%, -50%)"}},isOpen:this.state.modalOpen,ariaHideApp:!1,children:[Object(f.jsx)(E,{CIOM:this.state.CIOM,closeModal:this.InvertOpenModal,onSubmit:this.handleOnSubmit}),Object(f.jsx)("div",{className:"closeDiv",children:Object(f.jsx)(p.a,{className:"closeBtn",onClick:this.InvertOpenModal,variant:"primary",children:"Cerrar"})})]})]})})]})]})}}]),a}(r.Component)),A=Object(i.f)(N),G=Object(f.jsxs)(i.c,{children:[Object(f.jsx)(i.a,{exact:!0,path:"AnomalyFormPrototype/",children:Object(f.jsx)(y,{})}),Object(f.jsx)(i.a,{exact:!0,path:"AnomalyFormPrototype/report/:id",children:Object(f.jsx)(A,{})}),Object(f.jsx)(i.a,{path:"*",children:Object(f.jsx)(S,{})})]});var w=function(){return Object(f.jsx)(c.a,{children:Object(f.jsx)("div",{className:"App",children:G})})},L=function(e){e&&e instanceof Function&&a.e(3).then(a.bind(null,202)).then((function(t){var a=t.getCLS,r=t.getFID,o=t.getFCP,n=t.getLCP,c=t.getTTFB;a(e),r(e),o(e),n(e),c(e)}))};n.a.render(Object(f.jsx)(w,{}),document.getElementById("root")),L()}},[[189,1,2]]]);
//# sourceMappingURL=main.37f7584e.chunk.js.map